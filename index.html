<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VAT Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            var items = [
                { name: "Car Cover", price: 100.00 },
                { name: "Floor Mats", price: 20.00 },
                { name: "Seat Covers", price: 30.00 },
                { name: "Phone Holder", price: 4.00 }
            ];

            function populateItemDropdown() {
                items.forEach(item => {
                    $('#itemSelect').append(`<option value="${item.price}">${item.name}</option>`);
                });
            }

            populateItemDropdown();

            var quotationData = [];

            function addItem() {
                var selectedItem = $("#itemSelect option:selected").text();
                var selectedPrice = parseFloat($("#itemSelect").val());
                var quantity = parseFloat($("#itemQuantity").val());

                if (!isNaN(selectedPrice) && !isNaN(quantity)) {
                    quotationData.push({
                        description: selectedItem,
                        quantity: quantity,
                        unitPrice: selectedPrice
                    });
                    $('#addItemModal').modal('hide');
                    renderTable();
                }
            }

            function renderTable() {
                var subTotal = 0;
                $("#quotationTable tbody").empty();

                quotationData.forEach((item, index) => {
                    var amount = item.quantity * item.unitPrice;
                    subTotal += amount;

                    $("#quotationTable tbody").append(`
                        <tr>
                            <td>${item.description}</td>
                            <td class="text-center">${item.quantity}</td>
                            <td class="text-right">${item.unitPrice.toFixed(2)}</td>
                            <td class="text-right">${amount.toFixed(2)}</td>
                            <td class="text-center"><button class="btn btn-danger btn-sm" onclick="removeItem(${index})">X</button></td>
                        </tr>
                    `);
                });

                var vat = subTotal * 0.07;
                var netAmount = subTotal + vat;

                $("#subTotal").text(subTotal.toFixed(2));
                $("#vat").text(vat.toFixed(2));
                $("#netAmount").text(netAmount.toFixed(2));
            }

            function removeItem(index) {
                quotationData.splice(index, 1);
                renderTable();
            }

            $("#addItemButton").on("click", function() {
                addItem();
            });

            window.removeItem = removeItem;

            var date = new Date();
            $('#quotationDate').text(date.toDateString());
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 text-center">
                <h1>Accessory Shop Quotation</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <h3>Customer:</h3>
                <p>Customer Name</p>
                <p>Customer Address Line 1</p>
                <p>Customer Address Line 2</p>
            </div>
            <div class="col-sm-6 text-right">
                <h4 id="quotationDate"></h4>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <button class="btn btn-primary" data-toggle="modal" data-target="#addItemModal">Add Item</button>
            </div>
        </div>
        <table class="table table-striped table-bordered table-condensed" id="quotationTable">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Amount</th>
                    <th>Remove</th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr>
                    <td colspan="3" class="text-right">Subtotal</td>
                    <td colspan="2" class="text-right" id="subTotal">0.00</td>
                </tr>
                <tr>
                    <td colspan="3" class="text-right">VAT (7%)</td>
                    <td colspan="2" class="text-right" id="vat">0.00</td>
                </tr>
                <tr>
                    <td colspan="3" class="text-right">Total Due</td>
                    <td colspan="2" class="text-right" id="netAmount">0.00</td>
                </tr>
            </tfoot>
        </table>
        <footer class="text-center mt-4">
            <p><b>Make all checks payable to:</b> Accessory Shop</p>
            <p><b>If you have any questions concerning this invoice, call:</b> 123-456-7890</p>
            <p><b>THANK YOU FOR YOUR BUSINESS!</b></p>
        </footer>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="addItemModal" tabindex="-1" role="dialog" aria-labelledby="addItemModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addItemModalLabel">Add Item</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <label for="itemSelect">Select Item:</label>
                    <select id="itemSelect" class="form-control"></select>
                    <label for="itemQuantity">Quantity:</label>
                    <input type="number" id="itemQuantity" class="form-control" min="1" value="1">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="addItemButton">Add Item</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html>
